<!Doctype html>
<html lang="uk" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор</title>\


    <!-- Начинаю работу c CSS -->
    <style>
        body {
            font-family: "Comic Sans MS", Arial;
            display: flex;
            justify-content: center;
            align-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(90deg, saddlebrown, grey);
        }

        .calculator {
            background: #4e4343;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        #display { /* Экран калькулятора */
            width: 100%;
            height: 60px;
            font-size: 30px;
            text-align: right;
            padding: 10px;
            margin-bottom: 10px;
            border: 2px solid;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        button { /* кнопка */
            padding: 20px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .number {
            background: brown;
        }

        .number:hover { /*наведение*/
            background: bisque;
        }

        .operator { /*стиль для оператора*/
            background: coral;
            color: cornsilk;
        }

        .operator:hover { /* еффект мишки*/
            background: azure;
        }

        .equals { /* равно */
            background: orangered;
        }

        .clear {
            background: red;
            color: white;
            grid-column: span 2;
        }

        .clear:hover {
            background: darkred;
        }
    </style>

    <!-- Начинаю работу с HTML -->
</head>
<body>
<div class="calculator">
    <input name="text" id="display" readonly value="0">   <!-- Экран отображения -->

    <!-- кнопки калькулятора -->
    <div class="buttons">
        <button class="clear" onclick="clearDisplay()">C</button>
        <button class="operator" onclick="deleteLast()">&larr;</button>
        <button class="operator" onclick="appendToDisplay('/')">÷</button>

        <!-- Цифры и операции с ними -->
        <button class="number" onclick="appendToDisplay('7')">7</button>
        <button class="number" onclick="appendToDisplay('8')">8</button>
        <button class="number" onclick="appendToDisplay('9')">9</button>
        <button class="operator" onclick="appendToDisplay ('*')">×</button>

        <button class="number" onclick="appendToDisplay('4')">4</button>
        <button class="number" onclick="appendToDisplay('5')">5</button>
        <button class="number" onclick="appendToDisplay('6')">6</button>
        <button class="operator" onclick="appendToDisplay ('-')">-</button>

        <button class="number" onclick="appendToDisplay('1')">1</button>
        <button class="number" onclick="appendToDisplay('2')">2</button>
        <button class="number" onclick="appendToDisplay('3')">3</button>
        <button class="operator" onclick="appendToDisplay ('+')">+</button>

        <button class="number" onclick="appendToDisplay('0')">0</button>
        <button class="number" onclick="appendToDisplay('.')">.</button>

        <!-- Результат  -->
        <button class="equals" onclick="calculate()">=</button>
    </div>
</div>


<!-- Начало работы с Javascript-->
<script>
    const display = document.getElementById('display');

    <!-- Переменные для хранения данных калькулятора-->
    let firstNumber = 0;
    let operator = '';
    let waitingForSecond = false;

    function appendToDisplay(value) {                     // Функция для добавления цифры или точки на екран

        if (value === '.') {
            if (display.value.includes('.')) {
                return;
            }
        }


        if ('+-*/'.includes(value)) {
            handleOperator(value);
            return;
        }

        if (waitingForSecond || display.value === '0') {         //Если ждём второе число то на экране 0
            display.value = value;
            waitingForSecond = false;
        } else {
            display.value += value;                             // Добавляем цифру к существующему числу
        }
    }

    // Функция для обработки операции (+, -, *, /)
    function handleOperator(op) {
        const currentNumber = parseFloat(display.value);   // получаем число с экрана
        if (operator && waitingForSecond === false) {     // проверка или  было какое то действие...
            calculate();
            firstNumber = parseFloat(display.value);      //если условия были выполнены то расчет
        } else {
            firstNumber = currentNumber;                 // если это первое число
        }
        operator = op;
        waitingForSecond = true;                        // сохраняем новую операцию
    }

    //Функция что очистить экран
    function clearDisplay() {
        display.value = '0';                           //надпись на єкране "0"
        firstNumber = 0;                                // первое число на экране
        operator = '';                                 // скидываем любую математическую формулу
        waitingForSecond = false;                      // Начинаем  все сначала
    }

    //Функция для удаления последнего символа
    function deleteLast() {
        if (display.value.length > 1) {                //проверка длины длины
            display.value = display.value.slice(0, -1); // удаление последнего символа
        } else {
            display.value = '0';                         //  если что то осталось то скинуть в 0
        }
    }

    //Функция для обчисления результата
    function calculate() {
        if (operator === false) {                    // если нет операции, то ничего не делаем
            return;
        }
        const secondNumber = parseFloat(display.value);  // получаем второе число
        let result = 0;

        switch (operator) {
            case '+':
                result = firstNumber + secondNumber;
                break;
            case '-':
                result = firstNumber - secondNumber;
                break;
            case '*':
                result = firstNumber * secondNumber;
                break;
            case '/':
                if (secondNumber === 0) {               //  условие для проверки деления на ноль
                    display.value = 'Ошибка';
                    setTimeout(clearDisplay, 1500);         // Таймер для очистки
                    return;
                }
                result = firstNumber / secondNumber;
                break;
        }

        result = Math.round(result * 100000000) / 100000000  // округляем до 8 знаков
        display.value = result;                              // показуем результат
        operator = '';                                      // скидываем операцию
        waitingForSecond = false;
    }

    // Добавляем работу клавиатуры
    document.addEventListener('keydown', function (event) {
        if ('0123456789.'.includes(event.key)) {           //если нажата цифра или точка
            appendToDisplay(event.key)
        } else if (event.key === 'Enter') {               // если нажат Enter
            calculate();
        } else if (event.key === 'Backspace') {          // если нажать Backspace
            deleteLast();
        } else if (event.key === 'Escape') {            //если нажать ESC
            clearDisplay();
        }
    });
</script>
</body>
</html>









